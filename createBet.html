<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"
  />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css">
  <link rel="stylesheet" href="styles/styles.css">



  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>

  <!-- $ npm install bootstrap-select -->
  <title>gitbet</title>

	<style>
		body {
			font-family: Roboto, sans-serif;
		}

		.uppercase {
			text-transform: uppercase;
		}

		header {
			text-align: center;
			font-size: 24px;
		}

		.bootstrap-select {
			width: 100% !important;
		}

		#selected-date,
		#hidden-val {
			font-weight: bold;
			color: #333;
		}

		td,
		.colTitle {
			color: white;
			text-decoration-color: white;
		}

		.bootstrap-datetimepicker-widget table td span {
			display: none !important;
		}

		.bootstrap-datetimepicker-widget table td.day:hover,
		.bootstrap-datetimepicker-widget table td.hour:hover,
		.bootstrap-datetimepicker-widget table td.minute:hover,
		.bootstrap-datetimepicker-widget table td.second:hover,
		.bootstrap-datetimepicker-widget .picker-switch:hover,
		.glyphicon-chevron-right:hover {
			background: #eee;
			cursor: pointer;
			color: #333333 !important;
		}

		thead {
			color: #ffffff;
		}

		.bootstrap-datetimepicker-widget table th.disabled,
		.bootstrap-datetimepicker-widget table th.disabled:hover {
			color: white;
		}

		.datepicker.datepicker-inline {
			border: 5px solid #eee;
			display: inline-block;
			position: relative;
		}

		/* add a border to calendar/datepicker*/
		#datetimepicker {}

		.bootstrap-datetimepicker-widget {
			background-color: #3c3e43;
			border: 5px white;
		}
	</style>
</head>

<body>
	<nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img src="/images/gitbet-logo.png" style="width:78px; top; margin-top: -8px;">
                </a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li class="active">
                        <a href="/createbet">Create Bet</a>
                    </li>
                    <li>
                        <a href="/balance">Balance</a>
                    </li>
                    <li>
                        <a href="/friends">View Pals</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                  <!--   <li>
                        <a href="index">
                            <span class="glyphicon glyphicon-user"></span> Sign Up</a>
                    </li> -->
                    <li>
                        <a href="index">
                            <span class="glyphicon glyphicon-log-in"></span> Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main>
    <div class="container">
      <div class="jumbotron">
	<header>
		<h2>Create Your Bet</h2>
	</header>

		<div class="container">
			<form method="POST" role="form">
				<div class="row">
					<div class="col col-md-6" style="padding-top: 20px;" id="drop-down">
						<h4>Please select YOUR name as the first Better</h4>
						<select id="firstbetter" class="selectpicker">
							<option selected="selected">Chose your name</option>
							<option value="Ken">Ken</option>
							<option value="Anthony">Anthony</option>
							<option value="Brian">Brian</option>
							<option value="Stacie">Stacie</option>
						</select>
					</div>
					<div class="col col-md-6" style="padding-top: 20px;">
						<h4>Please select the name of the second Better</h4>
						<select id="secondbetter" class="selectpicker">
							<option selected="selected">Chose a name</option>
							<option value="Ken">Ken</option>
							<option value="Anthony">Anthony</option>
							<option value="Brian">Brian</option>
							<option value="Stacie">Stacy</option>
						</select>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12" style="padding-top: 20px;">
						<h4>Can't find the person you want to bid against? Add them here <a style="cursor: pointer;" data-toggle="modal" data-target="#addBetter"><i
								 class="fas fa-plus" style="color:green; font-size: px;"></i></a></h4>

					</div>
				</div>
				<div class="row">
					<div class="col-sm-12" style="padding-top: 20px;">
						<div class="form-group">
							<h4><label for="thebet">The bet:</label></h4>
							<textarea class="form-control" rows="3" id="thebet"></textarea>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12" style="padding-top: 20px;">
						<div class="form-group">
							<h4><label for="thebet">The bet is for:</label></h4>
							<textarea class="form-control" rows="3" id="thebetfor"></textarea>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12">
						<h4>Select the bet end date:
							<span id="hidden-val" style="color:red;"></span>
						</h4>
					</div>
				</div>
		</div>
		</form>

		<!-- container for calendar/date-picker -->
		<div class="container" id='datepicker-container'>
			<div class="row">
				<div class='col-sm-12'>
					<div class="form-group">
						<div class="row">
							<div class="col-md-8">
								<div class='date' id='datetimepicker'>
									<span class="input-group">
									</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Submit date button-->
			<button id="submit-bet" class="btn btn-danger">SUBMIT BET</button>
			<br><br>
		</div>
		</div>
	</main>
	<script>

		$(document).ready(function () {

			var eventBody = $("#event-body");
			var submitDate = $("#submit-bet");
			var noEvents = $('#no-events');

			var currentHeadliner,
				headlinerID;
			var newDate;
			var formatted_date = "";

			// $.get("/api/users", function (data) {
			// 	console.log(data);
			// 	$("#drop-down").append()
			// 	for (i = 0; i < data.length; i++) {
			// 		$("#drop-down").append("<option value=" + data[i].first_name + data[i].last_name + ">" + data[i].first_name + data[i].last_name + "</option>");
			// 		$("#secondbetter").append("<option value=" + data[i].first_name + data[i].last_name + ">" + data[i].first_name + data[i].last_name + "</option>");
			// 	}
			// });

			$('select[id="firstbetter"]').change(function () {

				if ($(this).val() == "1")
					alert("call the do something function on option 1");
				if ($(this).val() == "2")
					alert("call the do something function on option 2");
				if ($(this).val() == "3")
					alert("call the do something function on option 3");
				if ($(this).val() == "4")
					alert("call the do something function on option 4");

			});

			$('select[id="secondbetter"]').change(function () {

				if ($(this).val() == "5")
					alert("call the do something function on option 5");
				if ($(this).val() == "6")
					alert("call the do something function on option 6");
				if ($(this).val() == "7")
					alert("call the do something function on option 7");
				if ($(this).val() == "8")
					alert("call the do something function on option 8");

			});
			// display calendar / datepicker
			$(function () {
				$('#datetimepicker1').datetimepicker();
			});
			// calendar / datepicker
			$(function () {
				$('#datetimepicker').datetimepicker({
					inline: true,
					sideBySide: false,
					minDate: moment(1, 'h'),
				});

				function selectChanged(newvalue) {
					alert("you chose: " + newvalue);
				}
			});
			// when user clicks to change to new date, display currently selected date
			$('#datetimepicker').on('dp.change', function (event) {
				$('#selected-date').text(event.date);
				formatted_date = event.date.format('YYYY/MM/DD');
				$('.date').val(formatted_date);
				$('#hidden-val').text($('.date').val());
			});
			// Post function after clicking submit bet
			$("#submit-bet").click(function (event) {
				event.preventDefault();
				var firstBetter = $("#firstbetter").val();
				var secondBetter = $("#secondbetter").val();
				var bet = $("#thebet").val();
				var amount = $("#thebetfor").val();
				var date = formatted_date;
				var newBet = {
					firstbetter: firstBetter,
					secondbetter: secondBetter,
					thebet: bet,
					amount: amount,
					enddate: date
				};
				console.log(newBet);
				$.post("/api/bets", newBet, function (data) {
					console.log(data);
				});
				alert("Bet submitted");
				window.location.replace("/");
			});
			// Displaying users to select betters

		});
	</script>


	<!-- basic modal -->
	<div class="modal fade" id="addBetter" tabindex="-1" role="dialog" aria-labelledby="addBetter" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="myModalLabel">Add the person you want to bet.</h4>
				</div>
				<form method="POST" role="form">
					<div class="modal-body">
						<div class="form-group">
							<label for="email">email:</label>
							<input type="text" class="form-control" id="email">
						</div>
						<div class="form-group">
							<label for="firstname">First Name:</label>
							<input type="text" class="form-control" id="firstname">
						</div>
						<div class="form-group">
							<label for="lastname">Last Name:</label>
							<input type="text" class="form-control" id="lastname">
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary" id="add-btn" data-dismiss="modal">Add person</button>
					</div>
			</div>
			</form>
		</div>
	</div>

	<script type="text/javascript">
		// Question: What does this code do?
		$("#add-btn").on("click", function (event) {
			event.preventDefault();
			var newBetter = {
				email: $("#email").val().trim(),
				firstname: $("#firstname").val().trim(),
				lastname: $("#lastname").val().trim()
			};

			$.post("/api/users", newBetter, function (data) {
				console.log(data);
			}).then(alert("New User Created"));
		});
	</script>

</body>

</html>



